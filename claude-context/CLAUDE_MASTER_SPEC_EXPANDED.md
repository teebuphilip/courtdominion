
# CLAUDE_MASTER_SPEC.md (Expanded Edition)
CourtDominion — Unified Master Specification for Claude
Version: 2.0 — Expanded Technical & Behavioral Edition

--------------------------------------------------------------------------------
PRIMARY DIRECTIVES (NON‑NEGOTIABLE)
--------------------------------------------------------------------------------
Claude MUST:
- Follow this specification EXACTLY.
- NOT ask clarifying questions.
- NOT deviate from structure, naming, endpoints, logic, or text-loading rules.
- NOT propose alternative architectures.
- ALWAYS load marketing/content text from filesystem JSON.
- ALWAYS keep frontend hardcoded‑text‑free.
- ALWAYS implement fallback → local JSON when API fails.
- ALWAYS follow the API, caching, admin, and content system defined here.


--------------------------------------------------------------------------------
SYSTEM PURPOSE — EXTENDED DETAIL
--------------------------------------------------------------------------------
CourtDominion is a hybrid static/dynamic content-driven frontend for a fantasy
basketball insights product. The site’s core priority is:

1. Speed — user sees projections ASAP with minimal UI clutter.
2. Reliability — works even when backend content endpoints fail.
3. Editability — all marketing text, SEO, posts, and email templates must be
   editable WITHOUT REDEPLOYMENT via admin JSON editing.
4. Deterministic behavior — no magical guessing or model reinterpretation.

Claude must implement all logic deterministically and without creative deviation.


--------------------------------------------------------------------------------
FULL PROJECT STRUCTURE (LOCKED & EXPLICIT)
--------------------------------------------------------------------------------
Root/
  CLAUDE_MASTER_SPEC.md              ← THIS FILE (source of truth)
  DEVELOPER_HANDOFF.md               ← Auto-generated by Claude when finishing project
  INSTRUCTIONS_FOR_CLAUDE.md         ← Short bootstrap instructions
  PROJECT_STRUCTURE_LOCKFILE.md      ← Claude auto-regenerates but may not modify structure
  DO_NOT_DEVIATE.md                  ← Behavioral contract
  SESSION_RECOVERY_INSTRUCTIONS.md   ← Restart script

  content/
    marketing/
      marketing.json
      seo.json
      social_posts.json
      ad_copy.json
      email_templates.json
      pro_tier_future.json
      marketing.example.json         ← fallback key template (Claude must generate)
    future/
      blog/
        sample_post_1.md
        sample_post_2.md
    seo_keywords.md
    content-spec.md

  src/
    app/
      layout.tsx
      page.tsx
      projections/page.tsx
      optimizer/page.tsx
      waiver/page.tsx
      about/page.tsx
      settings/page.tsx
      blog/page.tsx        ← stub only
      admin/page.tsx       ← JSON editor
    lib/
      getMarketing.ts
      loadContent.ts
    api/
      marketing/route.ts
      content/[slug]/route.ts
      blog/[postSlug]/route.ts

  public/
    images/
      (optional placeholders)

  package.json
  tailwind.config.js
  next.config.js
  .env.local.example


--------------------------------------------------------------------------------
CONTENT SYSTEM — FULL EXPANDED SPEC
--------------------------------------------------------------------------------
The content directory is the SINGLE source of truth for all user-visible text.

Claude must generate example JSON files with COMPLETE KEYS, even if values
are placeholders.

marketing.json schema (complete & required):

{
  "hero": {
    "title": "",
    "subtitle": "",
    "cta_primary": "",
    "cta_secondary": ""
  },
  "features": {
    "daily_projections": { "title": "", "body": "" },
    "lineup_optimizer": { "title": "", "body": "" },
    "waiver_wire": { "title": "", "body": "" }
  },
  "social_proof": {
    "stat_badge": "",
    "testimonials": [
      { "body": "", "author": "" }
    ]
  },
  "pricing": {
    "free": { "price": "", "description": "" },
    "pro": { "price": "", "description": "" }
  },
  "about": {
    "story": "",
    "mission": ""
  }
}

Claude must ensure:
- No missing keys.
- Keys remain stable.
- If API JSON missing fields → fallback to example JSON.


--------------------------------------------------------------------------------
API SPEC — FULL DETAIL
--------------------------------------------------------------------------------
### GET /api/marketing
- Merges all JSON files under content/marketing.
- 300s cache.
- Bypass cache with ?reload=true.
- Fallback on error: default JSON from local filesystem.
- Claude must implement safe schema validation.

### POST /api/marketing
- Requires header:
  Authorization: Bearer <ADMIN_TOKEN>
- Writes new JSON to filesystem.
- Invalidates cache.
- Validation required.

### GET /api/content/[slug]
- slug maps to the filename WITHOUT extension.
- e.g. slug="seo" → seo.json
- Returns parsed JSON.

### POST /api/content/[slug]
- Same admin logic as POST marketing.
- Writes EXACT FILE content.

### GET /api/blog/[postSlug]
- Reads markdown file from content/future/blog.
- Returns `{ markdown: "<file contents>" }`


--------------------------------------------------------------------------------
FRONTEND LOGIC — HIGH‑DETAIL IMPLEMENTATION RULES
--------------------------------------------------------------------------------
Claude must implement:

### getMarketing.ts
- Fetch from API (no-store).
- If API fails → import local JSON fallback.
- Always return fully merged schema.

### loadContent.ts
- Generic loader for seo.json, social_posts.json, etc.
- Fallback to local JSON if network error.

### Component Rendering
- ALL displayed text must reference keys:
  e.g. content.hero.title
- NEVER hardcode English strings except button labels that belong to UI chrome.

### Error Banner
If fallback used:
Display small banner:
"Content temporarily unavailable — showing local safe version."


--------------------------------------------------------------------------------
UI & DESIGN — FULL RULESET
--------------------------------------------------------------------------------
Theme:
  - Background: #0F172A
  - Accent: #3B82F6
  - Highlight Grey: #94A3B8
  - Deep Navy: #0B1B2B

Typography:
  - Inter or system font.
  - Headline spacing 1.1–1.3.
  - Body spacing 1.5.

Layout:
  - Mobile-first.
  - Max-width container: 1280px.
  - Center content.

Components Claude must implement:
  - Hero section
  - Feature cards
  - Testimonial cards
  - Pricing teaser block
  - Header nav
  - Footer nav
  - SEO head tags generated from seo.json


--------------------------------------------------------------------------------
ADMIN EDITOR — EXTENDED SPEC
--------------------------------------------------------------------------------
Admin editor must:

1. Load JSON via GET /api/marketing.
2. Display raw JSON in textarea.
3. On Save:
   - POST /api/marketing
   - Pass Authorization header
   - Validate JSON before sending
4. After save, call:
   GET /api/marketing?reload=true
5. Display success or error toast.
6. Provide "Revert to local default" button:
   - Loads marketing.example.json
   - Saves it to marketing.json via POST

Claude must implement:
- Syntax highlighting (optional)
- JSON beautifier
- Error panel for invalid JSON


--------------------------------------------------------------------------------
SESSION RECOVERY — ULTRA SHORT
--------------------------------------------------------------------------------
Whenever conversation resets, user says:

"Claude — reload CLAUDE_MASTER_SPEC.md and continue exactly according to it. Do NOT ask questions."

Claude must fully reload all logic and continue where it left off.


--------------------------------------------------------------------------------
DO NOT DEVIATE — ENFORCEMENT
--------------------------------------------------------------------------------
Claude MUST NOT:
- invent structure
- invent endpoints
- rename content keys
- change file names
- change navigation
- decide alternative color themes
- propose alternate CMS
- remove fallback logic
- ignore schema validation
- store content anywhere except /content

If stuck:
Claude must consult this spec and choose the option closest to textual instructions.

